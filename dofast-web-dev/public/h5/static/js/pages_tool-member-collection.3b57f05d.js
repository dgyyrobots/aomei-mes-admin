(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_tool-member-collection"],{"36c7":function(e,t,o){"use strict";o.r(t);var i=o("86be"),s=o.n(i);for(var n in i)["default"].indexOf(n)<0&&function(e){o.d(t,e,(function(){return i[e]}))}(n);t["default"]=s.a},"381b":function(e,t,o){var i=o("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n */[data-v-2160f283] .fixed{position:relative;top:0}[data-v-2160f283] .empty{margin-top:0!important}.lineheight-clear[data-v-2160f283]{line-height:1}.goods_list[data-v-2160f283]{width:100%;padding:%?20?% 0;padding-top:0;box-sizing:border-box}.goods_list .goods_li[data-v-2160f283]{height:%?200?%;background:#fff;overflow:hidden;border-radius:%?10?%;display:flex;justify-content:space-between;margin:%?20?% %?30?%;padding:%?30?%}.goods_list .goods_li .pic[data-v-2160f283]{width:%?200?%;height:%?200?%;box-sizing:border-box;border-radius:%?10?%;overflow:hidden}.goods_list .goods_li .pic uni-image[data-v-2160f283]{width:100%;height:100%}.goods_list .goods_li .goods_info[data-v-2160f283]{flex:1;height:100%;padding-left:%?20?%;box-sizing:border-box;display:flex;justify-content:space-between;flex-direction:column}.goods_list .goods_li .goods_name[data-v-2160f283]{width:100%;height:%?80?%;line-height:1.5;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.goods_list .goods_li .goods_opection[data-v-2160f283]{width:100%;height:%?80?%;display:flex;justify-content:space-between;align-items:flex-end}.goods_list .goods_li .goods_opection .right[data-v-2160f283]{display:flex;align-items:flex-end}.goods_list .goods_li .goods_opection .symbol[data-v-2160f283]{font-size:%?24?%;color:var(--price-color)}.goods_list .goods_li .goods_opection .price[data-v-2160f283]{font-size:%?32?%;color:var(--price-color)}.goods_list .goods_li .goods_opection .cars[data-v-2160f283]{padding:%?0?% %?15?%;border:%?1?% solid #eee;border-radius:%?32?%}.goods_list .goods_li .goods_opection uni-icon[data-v-2160f283]{font-size:%?24?%}.goods_list .goods_li .goods_opection .alike[data-v-2160f283]{padding:%?0?% %?15?%;border:%?1?% solid #eee;border-radius:%?24?%;margin-left:%?20?%}.empty[data-v-2160f283]{width:100%;display:flex;flex-direction:column;align-items:center;padding:%?20?%;box-sizing:border-box;margin-top:%?50?%}',""]),e.exports=t},4124:function(e,t,o){"use strict";var i=o("c51e"),s=o.n(i);s.a},"4bc4":function(e,t,o){"use strict";o.r(t);var i=o("60c2"),s=o("36c7");for(var n in s)["default"].indexOf(n)<0&&function(e){o.d(t,e,(function(){return s[e]}))}(n);o("4124");var a=o("f0c5"),l=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,"2160f283",null,!1,i["a"],void 0);t["default"]=l.exports},"60c2":function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"c",(function(){return n})),o.d(t,"a",(function(){return i}));var i={pageMeta:o("6d42").default,nsEmpty:o("7fc0").default,nsGoodsRecommend:o("42fc").default,nsLogin:o("3423").default,loadingCover:o("ed27").default},s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-uni-view",[o("page-meta",{attrs:{"page-style":e.themeColor}}),o("v-uni-view",[e.token?o("mescroll-uni",{ref:"mescroll",staticClass:"member-point",attrs:{size:8},on:{getData:function(t){arguments[0]=t=e.$handleEvent(t),e.getData.apply(void 0,arguments)},listenRefresh:function(t){arguments[0]=t=e.$handleEvent(t),e.listenRefresh.apply(void 0,arguments)}}},[o("v-uni-view",{staticClass:"goods_list",attrs:{slot:"list"},slot:"list"},[e.collectionList.length>0?e._l(e.collectionList,(function(t,i){return o("v-uni-view",{key:i,staticClass:"goods_li margin-top",on:{click:function(o){o.stopPropagation(),arguments[0]=o=e.$handleEvent(o),e.toDetail(t)}}},[o("v-uni-view",{staticClass:"pic"},[o("v-uni-image",{attrs:{src:e.$util.img(t.goods_image.split(",")[0],{size:"mid"}),mode:"aspectFill"},on:{error:function(t){arguments[0]=t=e.$handleEvent(t),e.goodsImageError(i)}}})],1),o("v-uni-view",{staticClass:"goods_info"},[o("v-uni-view",{staticClass:"goods_name font-size-base"},[e._v(e._s(t.sku_name))]),o("v-uni-view",{staticClass:"goods_opection"},[o("v-uni-view",{staticClass:"left lineheight-clear"},[o("v-uni-text",{staticClass:"symbol price-style small"},[e._v("￥")]),o("v-uni-text",{staticClass:"price price-style large"},[e._v(e._s(parseFloat(t.discount_price).toFixed(2).split(".")[0]))]),o("v-uni-text",{staticClass:"symbol price-style small"},[e._v("."+e._s(parseFloat(t.discount_price).toFixed(2).split(".")[1]))])],1),o("v-uni-view",{staticClass:"right"},[o("v-uni-view",{staticClass:"cars",on:{click:function(o){o.stopPropagation(),arguments[0]=o=e.$handleEvent(o),e.deleteItem(t.goods_id)}}},[o("v-uni-view",{staticClass:"icon iconfont icon-icon7"})],1)],1)],1)],1)],1)})):e._e(),0==e.collectionList.length&&e.isShowEmpty?o("ns-empty",{attrs:{text:"暂无关注的商品",isIndex:!1}}):e._e(),o("ns-goods-recommend",{ref:"goodsRecommend"})],2)],1):e._e(),o("ns-login",{ref:"login"}),o("loading-cover",{ref:"loadingCover"})],1)],1)},n=[]},73853:function(e,t,o){"use strict";o("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o("acd8"),o("99af"),o("4de4"),o("d3b7");var i={data:function(){return{collectionList:[],isShowEmpty:!1}},methods:{toDetail:function(e){this.$util.redirectTo("/pages/goods/detail",{goods_id:e.goods_id})},getData:function(e){var t=this;this.isShowEmpty=!1;var o=[];this.$api.sendRequest({url:"/api/goodscollect/page",data:{page_size:e.size,page:e.num},async:!1}).then((function(i){for(var s=i.data.list,n=0;n<s.length;n++)s[n].composite_score=Math.floor((parseFloat(s[n].shop_desccredit)+parseFloat(s[n].shop_servicecredit)+parseFloat(s[n].shop_deliverycredit))/3).toFixed(1);o=o.concat(s),1==e.num&&(t.collectionList=[]),t.collectionList=t.collectionList.concat(s),e.endSuccess(o.length),t.$refs.loadingCover&&t.$refs.loadingCover.hide(),t.isShowEmpty=!0}))},listenRefresh:function(e){this.$refs.goodsRecommend.init()},deleteItem:function(e){var t=this;this.$api.sendRequest({url:"/api/goodscollect/delete",data:{goods_id:e},success:function(o){if(0==o.code){t.$util.showToast({title:"删除成功"});var i=t.collectionList,s=i.filter((function(t){return t.goods_id!=e}));t.collectionList=s}else t.$util.showToast({title:o.message})}})},imageError:function(e){this.collectionList[e].logo=this.$util.getDefaultImage().goods,this.$forceUpdate()},goodsImageError:function(e){this.collectionList[e].sku_image=this.$util.getDefaultImage().goods,this.$forceUpdate()}}};t.default=i},"86be":function(e,t,o){"use strict";o("7a82");var i=o("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(o("42fc")),n=i(o("73853")),a={components:{nsGoodsRecommend:s.default},mixins:[n.default],data:function(){return{token:null}},onShow:function(){var e=this;uni.getStorageSync("token")?(this.token=uni.getStorageSync("token"),this.$refs.mescroll&&this.$refs.mescroll.refresh()):setTimeout((function(){e.$refs.login.open("/pages_tool/member/collection")}))},watch:{storeToken:function(e,t){e&&(this.token=e,this.$refs.mescroll.refresh())}}};t.default=a},c51e:function(e,t,o){var i=o("381b");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=o("4f06").default;s("7c58e6d8",i,!0,{sourceMap:!1,shadowMode:!1})}}]);