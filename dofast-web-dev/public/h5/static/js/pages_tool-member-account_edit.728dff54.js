(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_tool-member-account_edit"],{"013c":function(t,a,e){"use strict";e("7a82"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("c975"),e("a9e3"),e("ac1f"),e("5319"),e("acd8");var n={type:"scrolldone",target:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},currentTarget:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},detail:{}},i={props:{backgroundTextStyle:{type:String,default:"dark",validator:function(t){return-1!==["dark","light"].indexOf(t)}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created:function(){var t=this,a=getCurrentPages()[0];this.$pageVm=a.$vm||a,uni.onWindowResize((function(a){t.$emit("resize",a)})),this.$pageVm.$on("hook:onPageScroll",(function(a){t.$emit("scroll",a)})),this.$watch("backgroundTextStyle",(function(){t.setBackgroundTextStyle()})),this.$watch((function(){return[t.rootFontSize,t.pageStyle]}),(function(){t.setPageMeta()})),this.$watch((function(){return[t.backgroundColor,t.backgroundColorTop,t.backgroundColorBottom]}),(function(){t.setBackgroundColor()})),this.$watch((function(){return[t.scrollTop,t.scrollDuration]}),(function(){t.pageScrollTo()}))},beforeMount:function(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle()},mounted:function(){this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh:function(t,a){t.setStyle({pullToRefresh:{support:a,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta:function(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle:function(){},setBackgroundColor:function(){},pageScrollTo:function(){var t=this,a=String(this.scrollTop);if(-1!==a.indexOf("rpx")&&(a=uni.upx2px(a.replace("rpx",""))),a=parseFloat(a),!isNaN(a)){var e=function e(i){i.scrollTop===a&&(t.$pageVm.$off("hook:onPageScroll",e),t.$emit("scrolldone",n))};uni.pageScrollTo({scrollTop:a,duration:this.scrollDuration,success:function(){t.$pageVm.$on("hook:onPageScroll",e)}})}}}};a.default=i},"15b5":function(t,a,e){var n=e("b4ed");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=e("4f06").default;i("40917245",n,!0,{sourceMap:!1,shadowMode:!1})},"1f10":function(t,a,e){"use strict";var n=e("15b5"),i=e.n(n);i.a},"6a74":function(t,a,e){"use strict";e.r(a);var n=e("b9bf"),i=e("fa5e");for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);e("1f10");var r=e("f0c5"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"1cb081b4",null,!1,n["a"],void 0);a["default"]=s.exports},"6d42":function(t,a,e){"use strict";e.r(a);var n=e("6ee6"),i=e("8f28");for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(o);var r=e("f0c5"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);a["default"]=s.exports},"6ee6":function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return i})),e.d(a,"a",(function(){}));var n=function(){var t=this.$createElement,a=this._self._c||t;return a("v-uni-view",{staticStyle:{display:"none"}},[this._t("default")],2)},i=[]},"8f28":function(t,a,e){"use strict";e.r(a);var n=e("013c"),i=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=i.a},b4ed:function(t,a,e){var n=e("24fb");a=n(!1),a.push([t.i,'@charset "UTF-8";\n/**\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n */.account-list-content[data-v-1cb081b4]{margin:%?20?% %?30?%;padding:0 %?30?%;background-color:#fff;border-radius:%?10?%}.account-list-content .edit-item[data-v-1cb081b4]{display:flex;align-items:center;padding:0 %?30?%;padding:%?30?% 0;background-color:#fff}.account-list-content .edit-item .tit[data-v-1cb081b4]{width:%?120?%}.account-list-content .edit-item .desc[data-v-1cb081b4]{flex:1;margin-left:%?20?%;padding:0}.account-list-content .edit-item[data-v-1cb081b4]:first-of-type{margin-top:%?20?%}.account-list-content .edit-item .picker[data-v-1cb081b4]{flex:1}.account-list-content .edit-item .picker uni-text[data-v-1cb081b4]:last-child{line-height:%?50?%;float:right;color:#909399;font-size:%?20?%}.account-list-content > .edit-item + .edit-item[data-v-1cb081b4]{border-top:%?2?% solid #eee}.add[data-v-1cb081b4]{margin-top:%?60?%;height:%?80?%;line-height:%?80?%!important;border-radius:%?80?%;font-weight:500;width:calc(100% - %?60?%);margin-left:%?30?%;font-size:%?32?%}.btn[data-v-1cb081b4]{position:fixed;left:0;width:100%;bottom:%?30?%;height:auto;padding-bottom:constant(safe-area-inset-bottom);\n  /*兼容 IOS<11.2*/padding-bottom:env(safe-area-inset-bottom)\n  /*兼容 IOS>11.2*/}',""]),t.exports=a},b9bf:function(t,a,e){"use strict";e.d(a,"b",(function(){return i})),e.d(a,"c",(function(){return o})),e.d(a,"a",(function(){return n}));var n={pageMeta:e("6d42").default,loadingCover:e("ed27").default},i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",[e("page-meta",{attrs:{"page-style":t.themeColor}}),e("v-uni-view",{staticClass:"account-list-content"},[e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.$lang("name")))]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"text",maxlength:"30",placeholder:"请输入真实姓名",name:"name"},model:{value:t.formData.realname,callback:function(a){t.$set(t.formData,"realname",a)},expression:"formData.realname"}})],1),e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.$lang("mobilePhone")))]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"number",maxlength:"11",placeholder:"请输入手机号"},model:{value:t.formData.mobile,callback:function(a){t.$set(t.formData,"mobile",a)},expression:"formData.mobile"}})],1),e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v(t._s(t.$lang("accountType")))]),e("v-uni-picker",{staticClass:"picker",attrs:{value:t.index,range:t.payList},on:{change:function(a){arguments[0]=a=t.$handleEvent(a),t.bindPickerChange.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"desc uni-input"},[t._v(t._s(t.payList[t.index]))]),e("v-uni-text",{staticClass:"iconfont icon-right"})],1)],1),"bank"==t.formData.withdraw_type?e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v("银行名称")]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"text",maxlength:"50",placeholder:"请输入银行名称"},model:{value:t.formData.branch_bank_name,callback:function(a){t.$set(t.formData,"branch_bank_name","string"===typeof a?a.trim():a)},expression:"formData.branch_bank_name"}})],1):t._e(),"wechatpay"!=t.formData.withdraw_type?e("v-uni-view",{staticClass:"edit-item"},[e("v-uni-text",{staticClass:"tit"},[t._v("提现账号")]),e("v-uni-input",{staticClass:"desc uni-input",attrs:{type:"text",maxlength:"30",placeholder:"请输入提现账号"},model:{value:t.formData.bank_account,callback:function(a){t.$set(t.formData,"bank_account","string"===typeof a?a.trim():a)},expression:"formData.bank_account"}})],1):t._e(),e("v-uni-view",{staticClass:"btn"},[e("v-uni-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.saveAccount.apply(void 0,arguments)}}},[t._v(t._s(t.$lang("save")))])],1),e("loading-cover",{ref:"loadingCover"})],1)],1)},o=[]},d1fa:function(t,a,e){"use strict";e("7a82");var n=e("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0,e("14d9"),e("26e9");var i=n(e("5411")),o={data:function(){return{formData:{realname:"",mobile:"",withdraw_type:"",bank_account:"",branch_bank_name:""},payList:[],index:0,flag:!1,transferType:[],accountInfo:null,back:"",type:"member"}},onLoad:function(t){t.id&&(this.formData.id=t.id),t.back&&(this.back=t.back),t.type&&(this.type=t.type)},onShow:function(){this.formData.id?this.getAccountDetail(this.formData.id):this.getTransferType(),this.formData.id?uni.setNavigationBarTitle({title:"编辑账户"}):uni.setNavigationBarTitle({title:"新增账户"})},methods:{getAccountDetail:function(t){var a=this;this.$api.sendRequest({url:"/api/memberbankaccount/info",data:{id:this.formData.id},success:function(t){0==t.code&&t.data&&(a.accountInfo=t.data,a.formData.realname=t.data.realname,a.formData.mobile=t.data.mobile,a.formData.bank_account=t.data.bank_account,a.formData.branch_bank_name=t.data.branch_bank_name,a.formData.withdraw_type=t.data.withdraw_type),a.getTransferType(),a.$refs.loadingCover&&a.$refs.loadingCover.hide()},fail:function(t){a.getTransferType(),a.$refs.loadingCover&&a.$refs.loadingCover.hide()}})},getTransferType:function(){var t=this;this.payList=[];var a="member"==this.type?"/api/memberwithdraw/transferType":"/fenxiao/api/withdraw/transferType";this.$api.sendRequest({url:a,success:function(a){if(a.code>=0&&a.data){for(var e in delete a.data.balance,t.transferType=a.data,t.transferType)t.payList.push(t.transferType[e]);if(1==t.payList.length&&"银行卡"==t.payList[0]&&(t.formData.withdraw_type="bank"),t.payList.reverse(),!t.formData.id&&t.$refs.loadingCover&&t.$refs.loadingCover.hide(),t.accountInfo&&-1==t.$util.inArray(t.accountInfo.withdraw_type_name,t.payList)&&t.payList.push(t.accountInfo.withdraw_type_name),t.payList.length&&t.accountInfo&&(t.index=t.$util.inArray(t.accountInfo.withdraw_type_name,t.payList)),!t.formData.withdraw_type&&t.payList.length)switch(t.payList[0]){case"银行卡":t.formData.withdraw_type="bank";break;case"支付宝":t.formData.withdraw_type="alipay";break;case"微信零钱":t.formData.withdraw_type="wechatpay";break}}}})},bindPickerChange:function(t){this.index=t.detail.value;var a="";for(var e in this.transferType)this.transferType[e]==this.payList[this.index]&&(a=e);""!=a&&(this.formData.withdraw_type=a)},vertify:function(){var t=[{name:"realname",checkType:"required",errorMsg:"请输入姓名"},{name:"mobile",checkType:"required",errorMsg:"请输入手机号"},{name:"mobile",checkType:"phoneno",errorMsg:"请输入正确的手机号"},{name:"withdraw_type",checkType:"required",errorMsg:"请选择账户类型"}];"bank"==this.formData.withdraw_type&&t.push({name:"branch_bank_name",checkType:"required",errorMsg:"请输入银行名称"}),"wechatpay"!=this.formData.withdraw_type&&t.push({name:"bank_account",checkType:"required",errorMsg:"请输入提现账号"});var a=i.default.check(this.formData,t);return!!a||(this.$util.showToast({title:i.default.error}),this.flag=!1,!1)},saveAccount:function(){var t=this;if(!this.flag&&(this.flag=!0,this.vertify())){var a=this.formData.id?"edit":"add";this.$api.sendRequest({url:"/api/memberbankaccount/"+a,data:{id:this.formData.id,realname:this.formData.realname,mobile:this.formData.mobile,withdraw_type:this.formData.withdraw_type,bank_account:this.formData.bank_account,branch_bank_name:this.formData.branch_bank_name},success:function(a){0==a.code?(t.formData.id?t.$util.showToast({title:"修改成功"}):t.$util.showToast({title:"添加成功"}),""!=t.back?t.$util.redirectTo(t.back,{},t.redirect):t.$util.redirectTo("/pages_tool/member/account")):(t.flag=!1,t.$util.showToast({title:a.message}))},fail:function(a){t.flag=!1}})}}}};a.default=o},fa5e:function(t,a,e){"use strict";e.r(a);var n=e("d1fa"),i=e.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(o);a["default"]=i.a}}]);