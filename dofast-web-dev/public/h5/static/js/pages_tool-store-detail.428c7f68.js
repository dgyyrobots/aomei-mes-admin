(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_tool-store-detail"],{"013c":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("c975"),i("a9e3"),i("ac1f"),i("5319"),i("acd8");var a={type:"scrolldone",target:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},currentTarget:{id:"",offsetLeft:0,offsetTop:0,dataset:{}},detail:{}},o={props:{backgroundTextStyle:{type:String,default:"dark",validator:function(t){return-1!==["dark","light"].indexOf(t)}},backgroundColor:{type:String,default:"#ffffff"},backgroundColorTop:{type:String,default:"#ffffff"},backgroundColorBottom:{type:String,default:"#ffffff"},scrollTop:{type:String,default:""},scrollDuration:{type:Number,default:300},pageStyle:{type:String,default:""},enablePullDownRefresh:{type:[Boolean,String],default:!1},rootFontSize:{type:String,default:""}},created:function(){var t=this,e=getCurrentPages()[0];this.$pageVm=e.$vm||e,uni.onWindowResize((function(e){t.$emit("resize",e)})),this.$pageVm.$on("hook:onPageScroll",(function(e){t.$emit("scroll",e)})),this.$watch("backgroundTextStyle",(function(){t.setBackgroundTextStyle()})),this.$watch((function(){return[t.rootFontSize,t.pageStyle]}),(function(){t.setPageMeta()})),this.$watch((function(){return[t.backgroundColor,t.backgroundColorTop,t.backgroundColorBottom]}),(function(){t.setBackgroundColor()})),this.$watch((function(){return[t.scrollTop,t.scrollDuration]}),(function(){t.pageScrollTo()}))},beforeMount:function(){this.setBackgroundColor(),(this.rootFontSize||this.pageStyle)&&this.setPageMeta(),this.backgroundTextStyle&&this.setBackgroundTextStyle()},mounted:function(){this.scrollTop&&this.pageScrollTo()},methods:{setPullDownRefresh:function(t,e){t.setStyle({pullToRefresh:{support:e,style:"Android"===plus.os.name?"circle":"default"}})},setPageMeta:function(){uni.setPageMeta({pageStyle:this.pageStyle,rootFontSize:this.rootFontSize})},setBackgroundTextStyle:function(){},setBackgroundColor:function(){},pageScrollTo:function(){var t=this,e=String(this.scrollTop);if(-1!==e.indexOf("rpx")&&(e=uni.upx2px(e.replace("rpx",""))),e=parseFloat(e),!isNaN(e)){var i=function i(o){o.scrollTop===e&&(t.$pageVm.$off("hook:onPageScroll",i),t.$emit("scrolldone",a))};uni.pageScrollTo({scrollTop:e,duration:this.scrollDuration,success:function(){t.$pageVm.$on("hook:onPageScroll",i)}})}}}};e.default=o},"20bb":function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("14d9"),i("ac1f"),i("5319"),i("13d5"),i("d3b7"),i("159b"),i("a9e3"),i("b64b");var o=a(i("fadd")),s={data:function(){return{storeId:0,latitude:null,longitude:null,covers:[],store:null,swiperCurrent:1,swiperHeight:""}},onLoad:function(t){this.storeId=t.store_id||0,this.location?(this.latitude=this.location.latitude,this.longitude=this.location.longitude):this.$util.getLocation(),this.getInfo()},watch:{location:function(t){t&&(this.latitude=t.latitude,this.longitude=t.longitude,this.getInfo())}},methods:{phoneCall:function(){uni.makePhoneCall({phoneNumber:this.store.telphone})},getInfo:function(){var t=this,e={store_id:this.storeId};this.latitude&&this.longitude&&(e.latitude=this.latitude,e.longitude=this.longitude),this.$api.sendRequest({url:"/api/store/info",data:e,success:function(e){if(e.data){t.store=e.data||{full_address:"",address:"",store_images:[]},t.covers.push({id:1,latitude:t.store.latitude,longitude:t.store.longitude,iconPath:t.$util.img("public/uniapp/store/map_icon.png"),height:25}),t.store.show_address=t.store.full_address.replace(/,/g," ")+" "+t.store.address,t.handleStoreImage()}else t.$util.showToast({title:"门店不存在"}),setTimeout((function(){t.$util.redirectTo("/pages_tool/store/list",{},"redirectTo")}),2e3)}})},handleStoreImage:function(){this.store.store_images||(this.store.store_images=[]),this.store.store_images=this.store.store_images.reduce((function(t,e){return t.images||(t.images=[]),t.images&&t.images.push(e.pic_path),t.spec||(t.spec=[]),t.spec&&t.spec.push(e.pic_spec),t}),{});var t="";this.store.store_images.spec&&this.store.store_images.spec.forEach((function(e,i){"string"==typeof e&&(e=e.split("*")),uni.getSystemInfo({success:function(t){var i=e[0]/t.windowWidth;e[0]=e[0]/i,e[1]=e[1]/i}}),(!t||t>e[1])&&(t=e[1])})),this.swiperHeight=Number(t)+"px",Object.keys(this.store.store_images).length||(this.store.store_images={},this.store.store_images.images=[this.$util.img("public/static/img/default_img/square.png")],this.store.store_images.spec=["350*350"],this.swiperHeight="380px")},swiperChange:function(t){this.swiperCurrent=t.detail.current+1},mapRoute:function(){o.default.openMap(Number(this.store.latitude),Number(this.store.longitude),this.store.store_name,"gcj02")},swiperImageError:function(){this.store.store_images.images=this.$util.img("public/static/img/default_img/square.png")}}};e.default=s},"3d9c":function(t,e,i){"use strict";i.r(e);var a=i("d487"),o=i("a86f");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("cb6b");var n=i("f0c5"),r=Object(n["a"])(o["default"],a["b"],a["c"],!1,null,"3dd42839",null,!1,a["a"],void 0);e["default"]=r.exports},"6d42":function(t,e,i){"use strict";i.r(e);var a=i("6ee6"),o=i("8f28");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);var n=i("f0c5"),r=Object(n["a"])(o["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=r.exports},"6ee6":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticStyle:{display:"none"}},[this._t("default")],2)},o=[]},"75e2":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n * 建议使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n */uni-page-body[data-v-3dd42839]{background-color:#f5f6fa}body.?%PAGE?%[data-v-3dd42839]{background-color:#f5f6fa}.store-detail .detail-head[data-v-3dd42839]{position:relative;width:100%;height:%?300?%;background-color:#fff}.store-detail .detail-head[data-v-3dd42839]::after{content:"";position:absolute;left:0;right:0;bottom:0;height:%?112?%;background-image:linear-gradient(transparent 10%,#f5f6fa)}.store-detail .detail-head .swiper[data-v-3dd42839]{width:100%;height:100%}.store-detail .detail-head .swiper .item[data-v-3dd42839]{width:100%;height:100%}.store-detail .detail-head .swiper uni-image[data-v-3dd42839]{width:100%;height:100%}.store-detail .detail-head .img-indicator-dots[data-v-3dd42839]{position:absolute;z-index:5;bottom:%?60?%;right:%?40?%;background:hsla(0,0%,39.2%,.4);color:#fff;font-size:%?24?%;line-height:%?40?%;border-radius:%?20?%;padding:0 %?20?%}.store-detail .detail-content[data-v-3dd42839]{position:relative;background-color:#fff;margin:%?-30?% %?30?% %?30?%;padding:0 %?24?%;border-radius:%?18?%;z-index:9}.store-detail .detail-content .content-item[data-v-3dd42839]{display:flex;align-items:center;justify-content:space-between;border-bottom:%?2?% solid #ededed;padding:%?24?% 0}.store-detail .detail-content .content-item[data-v-3dd42839]:last-of-type{border-bottom:0}.store-detail .detail-content .store-name[data-v-3dd42839]{font-size:%?32?%;font-weight:700;line-height:1.5;padding:%?6?% 0}.store-detail .detail-content .store-time-wrap[data-v-3dd42839]{flex-direction:column;align-items:baseline}.store-detail .detail-content .store-time-wrap .store-time[data-v-3dd42839]{font-size:%?24?%;color:#606266}.store-detail .detail-content .store-time-wrap .tag-wrap[data-v-3dd42839]{margin-top:%?20?%;display:flex;flex-wrap:wrap}.store-detail .detail-content .store-time-wrap .tag-wrap .tag-item[data-v-3dd42839]{padding:%?8?% %?10?%;margin-right:%?10?%;color:#6f7dad;background:#f4f5fa;border-radius:%?6?%;line-height:1;font-size:%?24?%}.store-detail .detail-content .telphone-wrap[data-v-3dd42839]{padding:%?26?% 0}.store-detail .detail-content .telphone-wrap .telphone[data-v-3dd42839]{font-weight:700;color:var(--base-color);font-size:%?26?%}.store-detail .detail-content .telphone-wrap > .iconfont[data-v-3dd42839]{width:%?60?%;height:%?48?%;line-height:%?48?%;text-align:center;background-color:#f4f5fa;border-radius:%?6?%}.store-detail .detail-content .address-wrap .address-name[data-v-3dd42839]{width:%?520?%;line-height:1.5;color:#606266;font-size:%?24?%}.store-detail .detail-content .address-wrap .address-location[data-v-3dd42839]{margin-top:%?12?%;display:flex;align-items:center;font-size:%?24?%;color:#999ca7}.store-detail .detail-content .address-wrap .address-location .icondiy[data-v-3dd42839]{font-size:%?24?%;margin-right:%?4?%}.store-detail .detail-content .address-wrap > .icondiy[data-v-3dd42839]{width:%?60?%;height:%?48?%;line-height:%?48?%;text-align:center;background-color:#f4f5fa;border-radius:%?6?%}.store-detail .detail-map[data-v-3dd42839]{background-color:#fff;margin:0 %?30?% %?30?%;border-radius:%?18?%;margin-bottom:calc(constant(safe-area-inset-bottom) + %?170?%);margin-bottom:calc(env(safe-area-inset-bottom) + %?170?%)}.store-detail .detail-map .map-head[data-v-3dd42839]{padding-left:%?24?%;height:%?100?%;line-height:%?100?%;font-size:%?32?%;font-weight:700}.store-detail .detail-map .map-body[data-v-3dd42839]{width:100%;height:%?460?%}.store-detail .store-action-fill[data-v-3dd42839]{padding-bottom:calc(constant(safe-area-inset-bottom) + %?170?%);padding-bottom:calc(env(safe-area-inset-bottom) + %?170?%)}.store-detail .store-action[data-v-3dd42839]{position:fixed;background-color:#fff;bottom:0;right:0;left:0;display:flex;justify-content:center;padding:%?30?% 0}.store-detail .store-action uni-button[data-v-3dd42839]{width:%?406?%;color:#fff;font-size:%?30?%;border-radius:%?50?%}',""]),t.exports=e},"8f28":function(t,e,i){"use strict";i.r(e);var a=i("013c"),o=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a},a86f:function(t,e,i){"use strict";i.r(e);var a=i("20bb"),o=i.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a},c767:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=52.35987755982988,o=3.141592653589793,s=6378245,n=.006693421622965943;function r(t,e){var i=2*t-100+3*e+.2*e*e+.1*t*e+.2*Math.sqrt(Math.abs(t));return i+=2*(20*Math.sin(6*t*o)+20*Math.sin(2*t*o))/3,i+=2*(20*Math.sin(e*o)+40*Math.sin(e/3*o))/3,i+=2*(160*Math.sin(e/12*o)+320*Math.sin(e*o/30))/3,i}function d(t,e){var i=300+t+2*e+.1*t*t+.1*t*e+.1*Math.sqrt(Math.abs(t));return i+=2*(20*Math.sin(6*t*o)+20*Math.sin(2*t*o))/3,i+=2*(20*Math.sin(t*o)+40*Math.sin(t/3*o))/3,i+=2*(150*Math.sin(t/12*o)+300*Math.sin(t/30*o))/3,i}function l(t,e){return t<72.004||t>137.8347||e<.8293||e>55.8271||!1}var c={bd09togcj02:function(t,e){var i=52.35987755982988,a=t-.0065,o=e-.006,s=Math.sqrt(a*a+o*o)-2e-5*Math.sin(o*i),n=Math.atan2(o,a)-3e-6*Math.cos(a*i),r=s*Math.cos(n),d=s*Math.sin(n);return[r,d]},gcj02tobd09:function(t,e){var i=Math.sqrt(t*t+e*e)+2e-5*Math.sin(e*a),o=Math.atan2(e,t)+3e-6*Math.cos(t*a),s=i*Math.cos(o)+.0065,n=i*Math.sin(o)+.006;return[s,n]},wgs84togcj02:function(t,e){if(l(t,e))return[t,e];var i=r(t-105,e-35),a=d(t-105,e-35),c=e/180*o,u=Math.sin(c);u=1-n*u*u;var f=Math.sqrt(u);i=180*i/(s*(1-n)/(u*f)*o),a=180*a/(s/f*Math.cos(c)*o);var h=e+i,g=t+a;return[g,h]},gcj02towgs84:function(t,e){if(l(t,e))return[t,e];var i=r(t-105,e-35),a=d(t-105,e-35),c=e/180*o,u=Math.sin(c);u=1-n*u*u;var f=Math.sqrt(u);return i=180*i/(s*(1-n)/(u*f)*o),a=180*a/(s/f*Math.cos(c)*o),mglat=e+i,mglng=t+a,[2*t-mglng,2*e-mglat]}};e.default=c},cb6b:function(t,e,i){"use strict";var a=i("e944"),o=i.n(a);o.a},d487:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var a={pageMeta:i("6d42").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("page-meta",{attrs:{"page-style":t.themeColor}}),t.store?i("v-uni-view",{staticClass:"store-detail"},[i("v-uni-view",{staticClass:"detail-head",style:{height:t.swiperHeight}},[i("v-uni-swiper",{staticClass:"swiper",attrs:{autoplay:"true",interval:"4000",circular:"true"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperChange.apply(void 0,arguments)}}},t._l(t.store.store_images.images,(function(e,a){return i("v-uni-swiper-item",{key:a,attrs:{"item-id":"store_id_"+a}},[i("v-uni-view",{staticClass:"item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewMedia(a)}}},[i("v-uni-image",{attrs:{src:t.$util.img(e),mode:"aspectFit"},on:{error:function(e){arguments[0]=e=t.$handleEvent(e),t.swiperImageError(a)}}})],1)],1)})),1),t.store.store_images.images&&t.store.store_images.images.length?i("v-uni-view",{staticClass:"img-indicator-dots"},[i("v-uni-text",[t._v(t._s(t.swiperCurrent))]),i("v-uni-text",[t._v("/"+t._s(t.store.store_images.images.length))])],1):t._e()],1),i("v-uni-view",{staticClass:"detail-content"},[i("v-uni-view",{staticClass:"content-item"},[i("v-uni-view",{staticClass:"store-name multi-hidden"},[t._v(t._s(t.store.store_name))])],1),t.store.open_date||t.store.is_default||t.store.is_pickup||t.store.is_o2o||t.store.is_express?i("v-uni-view",{staticClass:"content-item store-time-wrap"},[t.store.open_date?i("v-uni-view",{staticClass:"store-time"},[t._v(t._s(t.store.open_date))]):t._e(),t.store.is_default||t.store.is_pickup||t.store.is_o2o||t.store.is_express?i("v-uni-view",{staticClass:"tag-wrap"},[1==t.store.is_default?i("v-uni-text",{staticClass:"tag-item"},[t._v("总店")]):t._e(),1==t.store.is_pickup?i("v-uni-text",{staticClass:"tag-item"},[t._v("门店自提")]):t._e(),1==t.store.is_o2o?i("v-uni-text",{staticClass:"tag-item"},[t._v("同城配送")]):t._e(),1==t.store.is_express?i("v-uni-text",{staticClass:"tag-item"},[t._v("物流配送")]):t._e()],1):t._e()],1):t._e(),t.store.show_address||t.store.distance?i("v-uni-view",{staticClass:"content-item address-wrap"},[i("v-uni-view",{staticClass:"address-box"},[t.store.show_address?i("v-uni-view",{staticClass:"address-name"},[t._v(t._s(t.store.show_address))]):t._e(),t.store.distance?i("v-uni-view",{staticClass:"address-location"},[i("v-uni-text",{staticClass:"icondiy icon-system-weizhi"}),i("v-uni-text",[t._v("距您当前位置"+t._s(t.store.distance)+"km")])],1):t._e()],1),i("v-uni-text",{staticClass:"icondiy icon-daohang",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mapRoute()}}})],1):t._e(),t.store.telphone?i("v-uni-view",{staticClass:"content-item telphone-wrap"},[t.store.telphone?i("v-uni-text",{staticClass:"telphone"},[t._v(t._s(t.store.telphone))]):t._e(),i("v-uni-text",{staticClass:"iconfont icon-dianhua",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.phoneCall.apply(void 0,arguments)}}})],1):t._e()],1),i("v-uni-view",{staticClass:"detail-map"},[i("v-uni-view",{staticClass:"map-head"},[t._v("门店地图")]),i("v-uni-map",{staticClass:"map-body",attrs:{latitude:t.store.latitude,longitude:t.store.longitude,markers:t.covers}})],1)],1):t._e()],1)},s=[]},e944:function(t,e,i){var a=i("75e2");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("afbce930",a,!0,{sourceMap:!1,shadowMode:!1})},fadd:function(t,e,i){"use strict";i("7a82");var a=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("99af");var o=a(i("c767"));function s(t,e,i){uni.openLocation({latitude:t,longitude:e,name:i,fail:function(t){uni.showModal({content:"打开地图失败，请稍后重试"})}})}function n(t,e,i){switch(i){case"gcj02":return[t,e];case"bd09":return o.default.bd09togcj02(t,e);case"wgs84":return o.default.wgs84togcj02(t,e);default:return[t,e]}}var r={openMap:function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"gcj02",o=n(e,t,a);s(o[1],o[0],i)}};e.default=r}}]);